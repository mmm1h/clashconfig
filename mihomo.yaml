# Clash é…ç½®æ–‡ä»¶ - mihomo.yaml


#è®¢é˜…é“¾æ¥
proxy-providers:
  é­…å½±:
    type: http
    url: "__MEIYING_URL__"
    interval: 7200
    path: "./providers/é­…å½±.yaml"
    override:
      udp: true
    health-check:
      enable: true
      interval: 300
      url: https://www.gstatic.com/generate_204

  äº‘æ´:
    type: http
    url: "__YUNDONG_URL__"
    interval: 7200
    path: "./providers/äº‘æ´.yaml"
    override:
      udp: true
    health-check:
      enable: true
      interval: 300
      url: https://www.gstatic.com/generate_204

# ----------------- Clash é«˜çº§å‚æ•°é…ç½® start ----------------- #
geodata-mode: true
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 24
geox-url:
  geoip: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip-lite.dat"
  geosite: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"

dns:
  default-nameserver:
  - "https://223.5.5.5/dns-query#h3=true"
  - "https://119.29.29.29/dns-query#h3=true"
  nameserver:
  -  "223.5.5.5"
  -  "119.29.29.29"
  proxy-server-nameserver:
  - "https://dns.alidns.com/dns-query#h3=true"
  - "https://doh.pub/dns-query#h3=true"
  fallback:
  - "https://208.67.220.220/dns-query#ğŸš€ èŠ‚ç‚¹é€‰æ‹©&h3=true"
  - "https://101.101.101.101/dns-query#ğŸš€ èŠ‚ç‚¹é€‰æ‹©&h3=true"
  - "https://114514.dns.nextdns.io/dns-query#ğŸš€ èŠ‚ç‚¹é€‰æ‹©&h3=true"
  - "https://dns.twnic.tw/dns-query#ğŸš€ èŠ‚ç‚¹é€‰æ‹©&h3=true"

  fake-ip-range: 198.18.0.0/15
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    # å¸¸ç”¨ Fake IP filter åŸŸå
    - ruleset:fakeip_filter
    # BT/PT
    - "geosite: category-public-tracker,tracker"
    # Microsoft && Apple
    - "geosite: microsoft,onedrive,apple,icloud"
    # æ¸¸æˆå¹³å°ï¼ˆSteamã€Epicã€PSç­‰ï¼‰
    - "geosite: steam,epicgames,xbox,playstation,origin,category-games-cn,category-games-!cn,category-games,category-game-accelerator-cn,category-game-platforms-download"
    # Google
    - "geosite: google-cn,google-play@cn"
    # å…¶ä»–
    - "geosite: private,jsdelivr,category-ntp@cn,category-ddns,category-speedtest@cn,nvidia@cn,paypal@cn,cn"
    - "+.lan"
    - "+.local"
    - "+.push.apple.com"
    - "+.pub.3gppnetwork.org"
    # è§£å†³ Windows è¿é€šæ€§æ£€æµ‹é—®é¢˜
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
  fallback-filter:
    geoip: true
    geoip-code: cn
    ipcidr:
      - 0.0.0.0/8
      - 10.0.0.0/8
      - 100.64.0.0/10
      - 127.0.0.0/8
      - 169.254.0.0/16
      - 172.16.0.0/12
      - 192.0.0.0/24
      - 192.0.2.0/24
      - 192.88.99.0/24
      - 192.168.0.0/16
      - 198.18.0.0/15
      - 198.51.100.0/24
      - 203.0.113.0/24
      - 224.0.0.0/3
      - ::/127
      - fc00::/7
      - fe80::/10
      - ff00::/8

# ----------------- Clash é«˜çº§å‚æ•°é…ç½® end ----------------- #
proxy-groups:
  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT
      - ğŸ‡­ğŸ‡° é¦™æ¸¯(é­…å½±)
      - ğŸ‡­ğŸ‡° é¦™æ¸¯(äº‘æ´)
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸŒ å…¶ä»–åœ°åŒº
      - ğŸ® æ¸¸æˆä¸“ç”¨

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50
    use:
      - é­…å½±
    filter: '^(?=.*(?i)(HK|Hong Kong|é¦™æ¸¯|æ¸¯))(?!.*(?i)(2x|4x)).*$'

  - name: "ğŸ“º å›½å¤–åª’ä½“"
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯(é­…å½±)
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯(äº‘æ´)
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡¸ ç¾å›½

  - name: "ğŸ® æ¸¸æˆä¸“ç”¨"
    type: select
    use:
      - é­…å½±
    filter: '(?i)(U-4x|U-2x)'

  - name: "â“‚ï¸ å¾®è½¯æœåŠ¡"
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ® æ¸¸æˆä¸“ç”¨

  - name: "ğŸ¤– AIèŠ‚ç‚¹"
    type: url-test
    url: 'https://api.openai.com/v1/completions'
    interval: 300
    tolerance: 100
    use:
      - é­…å½±
      - äº‘æ´
    filter: '^(?=.*(?i)(US|America|United States|GPT|ç¾å›½|SG|Singapore|ç‹®åŸ))(?!.*(?i)(4x)).*$'

  - name: "ğŸ¯ å…¨çƒç›´è¿"
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  - name: "ğŸš« å¹¿å‘Šå±è”½"
    type: select
    proxies:
      - REJECT
      - DIRECT

  - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯(äº‘æ´)
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯(é­…å½±)
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ® æ¸¸æˆä¸“ç”¨

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯(é­…å½±)
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    use:
      - é­…å½±
    filter: '^(?=.*(?i)(HK|Hong Kong|é¦™æ¸¯|æ¸¯))(?!.*(?i)(2x|4x)).*$'

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯(äº‘æ´)
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    use:
      - äº‘æ´
    filter: '(?i)(HK|Hong Kong|é¦™æ¸¯|æ¸¯)'

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    use:
      - é­…å½±
      - äº‘æ´
    filter: '(?i)(TW|Taiwan|å°æ¹¾|å°)'

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    use:
      - é­…å½±
      - äº‘æ´
    filter: '^(?=.*(?i)(SG|Singapore|æ–°åŠ å¡|ç‹®åŸ|å¡))(?!.*(?i)(2x|4x)).*$'

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    use:
      - é­…å½±
      - äº‘æ´
    filter: '^(?=.*(?i)(JP|Japan|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥))(?!.*(?i)(2x|4x)).*$'

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    use:
      - é­…å½±
      - äº‘æ´
    filter: '^(?=.*(?i)(US|America|United States|ç¾å›½|ç¾))(?!.*(?i)(2x|4x)).*$'

  - name: ğŸŒ å…¶ä»–åœ°åŒº
    type: select
    use:
      - é­…å½±
      - äº‘æ´
    filter: '^(?!.*(?i)(HK|Hong Kong|é¦™æ¸¯|æ¸¯|TW|Taiwan|å°æ¹¾|å°|SG|Singapore|æ–°åŠ å¡|ç‹®åŸ|å¡|JP|Japan|æ—¥æœ¬|US|America|United States|ç¾å›½|ç¾|æµé‡|å‰©ä½™|åº”æ€¥|å®˜ç½‘|å¥—é¤)).*$'

  - name: "ğŸ”€ éæ ‡ç«¯å£"
    type: select
    proxies:
      - ğŸŸ æ¼ç½‘ä¹‹é±¼
      - DIRECT

rule-anchor:
  ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: mrs }
  domain: &domain { type: http, interval: 86400, behavior: domain, format: mrs }
  class: &class { type: http, interval: 86400, behavior: classical, format: text }

rule-providers:
  # ä¸­å›½ IP æ®µï¼Œç”¨äº GEOIP è§„åˆ™åŒ¹é…
  cn_ip:
    <<: *ip
    url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"

  # ç”¨äº Fake IP è¿‡æ»¤
  fakeip_filter:
    <<: *domain
    url: "https://gh-proxy.com/https://raw.githubusercontent.com/wwqgtxx/clash-rules/release/fakeip-filter.mrs"

    
  Custom_Direct:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/mmm1h/clashconfig/main/rules/Direct.list'
    path: ./ruleset/Direct.yaml
    interval: 86400
    format: text

  Custom_US:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/mmm1h/clashconfig/main/rules/US.list'
    path: ./ruleset/US.yaml
    interval: 86400
    format: text
  Custom_AI:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/mmm1h/clashconfig/main/rules/AI.list'
    path: ./ruleset/AI.yaml
    interval: 86400
    format: text
  Custom_JP:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/mmm1h/clashconfig/refs/heads/main/rules/JP.list'
    path: ./ruleset/JP.yaml
    interval: 86400
    format: text
  Custom_Rules:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/mmm1h/clashconfig/main/rules/Rules.list'
    path: ./ruleset/Rules.yaml
    interval: 86400
    format: text
  Custom_Port_Direct:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Aethersailor/Custom_OpenClash_Rules/refs/heads/main/rule/Custom_Port_Direct.yaml"
    path: ./rule_provider/Custom_Port_Direct.yaml
    interval: 86400
    # format: text payloadæ ¼å¼ï¼Œæ— é¡»è½¬æ¢
    proxy: DIRECT

rules:
  # --- å¹¿å‘Šå±è”½ ---
  - GEOSITE,category-ads-all,ğŸš« å¹¿å‘Šå±è”½
    # æµ‹é€Ÿ
  - GEOSITE,category-speedtest,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # --- è‡ªå®šä¹‰è§„åˆ™ ---
  - RULE-SET,Custom_AI,ğŸ¤– AIèŠ‚ç‚¹
  - RULE-SET,Custom_US,ğŸ‡ºğŸ‡¸ ç¾å›½
  - RULE-SET,Custom_JP,ğŸ‡¯ğŸ‡µ æ—¥æœ¬
  - RULE-SET,Custom_Rules,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Custom_Direct,ğŸ¯ å…¨çƒç›´è¿

  # --- ç›´è¿è§„åˆ™ ---
  - GEOSITE,private,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-ntp,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,jsdelivr,ğŸ¯ å…¨çƒç›´è¿
  # BT/PT
  - GEOSITE,category-public-tracker,ğŸ¯ å…¨çƒç›´è¿
  # æ¸¸æˆå¹³å°
  - GEOSITE,steam@cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-game-platforms-download,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-game-accelerator-cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-games-cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-games@cn,ğŸ¯ å…¨çƒç›´è¿
  # Apple
  - GEOSITE,apple-cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,apple@cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,apple-update,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,icloud@cn,ğŸ¯ å…¨çƒç›´è¿
  # Apple2
  - GEOSITE,icloud,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,apple,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,apple-tvplus,ğŸ¯ å…¨çƒç›´è¿

  # Microsoft
  - GEOSITE,microsoft@cn,ğŸ¯ å…¨çƒç›´è¿
  # Google
  - GEOSITE,google-play@cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,google-cn,ğŸ¯ å…¨çƒç›´è¿
  # å…¶ä»–
  - GEOSITE,nvidia@cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,paypal@cn,ğŸ¯ å…¨çƒç›´è¿
  # - GEOSITE,category-ddns,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,cn,ğŸ¯ å…¨çƒç›´è¿
  

  # AI
  - GEOSITE,openai,ğŸ¤– AIèŠ‚ç‚¹
  - GEOSITE,google-gemini,ğŸ¤– AIèŠ‚ç‚¹
  - GEOSITE,apple-intelligence,ğŸ¤– AIèŠ‚ç‚¹
  - GEOSITE,category-ai-chat-!cn,ğŸ¤– AIèŠ‚ç‚¹
  - GEOSITE,category-ai-!cn,ğŸ¤– AIèŠ‚ç‚¹

  # æ¸¸æˆ
  - GEOSITE,steam,ğŸ® æ¸¸æˆä¸“ç”¨
  - GEOSITE,epicgames,ğŸ® æ¸¸æˆä¸“ç”¨
  - GEOSITE,origin,ğŸ® æ¸¸æˆä¸“ç”¨
  - GEOSITE,category-games-!cn,ğŸ® æ¸¸æˆä¸“ç”¨
  # - GEOSITE,category-game-platforms-download,ğŸ® æ¸¸æˆä¸“ç”¨
  - GEOSITE,category-games,ğŸ® æ¸¸æˆä¸“ç”¨

  # å›½å¤–åª’ä½“
  - GEOSITE,hbo,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,disney,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,netflix,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,youtube,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,spotify,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,primevideo,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,category-entertainment,ğŸ“º å›½å¤–åª’ä½“

  # ç¤¾äº¤å¹³å°
  - GEOSITE,tiktok,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,twitter,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,category-social-media-!cn,ğŸ“º å›½å¤–åª’ä½“
  - GEOSITE,category-communication,ğŸ“º å›½å¤–åª’ä½“
  
  # Microsoft
  - GEOSITE,github,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,onedrive,â“‚ï¸ å¾®è½¯æœåŠ¡
  - GEOSITE,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - GEOSITE,bing,â“‚ï¸ å¾®è½¯æœåŠ¡

  # Google
  - GEOSITE,google-play,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,googlefcm,ğŸš€ èŠ‚ç‚¹é€‰æ‹©


  # å…¶ä»–
  - GEOSITE,gfw,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,tracker,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,paypal,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,nvidia,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,docker,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,bahamut,ğŸ‡¹ğŸ‡¼ å°æ¹¾
  - GEOSITE,category-ecommerce,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # å…¶ä»–å›½å¤–åŸŸå
  - GEOSITE,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # --- IP ---
  - GEOIP,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,telegram,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,netflix,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,twitter,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,facebook,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,private,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve

  # --- æœ€ç»ˆåŒ¹é… ---
  - RULE-SET,Custom_Port_Direct,ğŸ”€ éæ ‡ç«¯å£
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
